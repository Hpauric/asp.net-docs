<!doctype html>
<html>
  <head>
<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
 <link href="images/favicon.ico" rel="icon" type="image/ico" />    
<title>Chai API Reference</title>

<style>
  .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
</style>
<link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
<link href="stylesheets/print.css" rel="stylesheet" media="print" />
  <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
<a href="https://github.com/Hpauric/chai-docs-site"><img style="position: fixed; top: 0; right: 0; border: 0; z-index: 150"
src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" 
data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"></a>

<a href="#" id="nav-button">
  <span>
NAV
<img src="images/navbar.png" alt="Navbar" />
  </span>
</a>
<div class="tocify-wrapper">
  <img src="images/logo.png" alt="Logo" />
<div class="search">
  <input type="text" class="search" id="input-search" placeholder="Search">
</div>
<ul class="search-results"></ul>
  <div id="toc">
  </div>
<ul class="toc-footer">
<li><a href='http://chaijs.com/api/'>Original Chai Documentation</a></li>
<li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
</ul>
</div>
<div class="page-wrapper">
  <div class="dark-box"></div>
  <div class="content">
<h2 id="c">c</h2>

<h3 id="attributes">attributes</h3>

<p>Attributes are effectively metadata that describe the property, method or class that they precede. They are encased in square brackets.</p>
<pre class="highlight csharp tab-csharp"><code><span class="na">[Display(Name = "Release Date")]</span> <span class="c1">// attribute</span>
<span class="k">public</span> <span class="n">DateTime</span> <span class="n">ReleaseDate</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</code></pre>
<h3 id="generics">Generics</h3>

<p>Generics can be classes or structs. Type-parameters are names used in place of concrete types when defining a new generic. They can be associated with classes or methods by placing the type parameter in angle brackets <code class="prettyprint">&lt; &gt;</code>
&ldquo;`csharp
public class List<T> // T stands for type
{
    &hellip;
}</p>

<p>List<int> list = new List<int>();
List<char> list = new List<char>();
List<Person> list = new List<Person>();
&rdquo;`</p>

<h2 id="asp-net-classes-cheatsheet">ASP.NET Classes Cheatsheet</h2>

<p>Classes
- IEnumerable System.Collections.Generic
- DbContext System.Data.Entity
- Controller System.Web.Mvc
- HTMLHelper  System.Web.Mvc</p>

<p>Methods</p>

<h2 id="controllers">Controllers</h2>

<blockquote>
<p>Rather than having a direct relationship between the URL and a file living on the web server’s hard
drive, a relationship exists between the URL and a method on a controller class</p>

<p>AccountController: Responsible for account-related requests, such as login and account
registration</p>

<p>a controller can pass data or objects to a view template using the <code class="prettyprint">ViewBag</code> object. The <code class="prettyprint">ViewBag</code> is a dynamic object that provides a convenient late-bound way to pass information to a view.</p>
</blockquote>

<h2 id="views">Views</h2>

<blockquote>
<p>The key transition character in Razor is the “at” sign (@). This single character is used to transition
from markup to code</p>
</blockquote>

<h3 id="layout">Layout</h3>

<p>By convention, the default layout for an ASP.NET app is named <code class="prettyprint">_Layout.cshtml</code>.</p>

<p>The default layout is defined in <code class="prettyprint">_ViewStart.cshtml</code> file in <code class="prettyprint">Views</code>.</p>

<h3 id="details-view">Details View</h3>

<blockquote>
<p>By including a <code class="prettyprint">@model</code> statement at the top of the view template file, you can specify the type of object that the view expects. </p>
</blockquote>

<h3 id="index-view">Index View</h3>

<blockquote>
<p><code class="prettyprint">@model IEnumerable&lt;MvcMovie.Models.Movie&gt;</code></p>

<p>This @model directive allows you to access the list of movies that the controller passed to the view</p>
</blockquote>

<h3 id="actionlink-method"><code class="prettyprint">ActionLink</code> Method</h3>

<p><code class="prettyprint">Html.ActionLink</code></p>

<p>The <code class="prettyprint">Html</code> object is a helper that&rsquo;s exposed using a property on the <code class="prettyprint">System.Web.Mvc.WebViewPage base</code> class. The <code class="prettyprint">ActionLink</code> method of the helper makes it easy to dynamically generate HTML hyperlinks that link to action methods on controllers. </p>
<pre class="highlight csharp tab-csharp"><code><span class="n">@Html</span><span class="p">.</span><span class="nf">ActionLink</span><span class="p">(</span><span class="s">"Edit"</span><span class="p">,</span> <span class="s">"Edit"</span><span class="p">,</span> <span class="k">new</span> <span class="p">{</span> <span class="n">id</span><span class="p">=</span><span class="n">item</span><span class="p">.</span><span class="n">ID</span> <span class="p">})</span> 
</code></pre>
<p>arguments
- string linkText
- string actionName (this is the method name unless otherwise specified)
- string controllerName OR object routeValues</p>

<p>The default route (established in <code class="prettyprint">App_Start\RouteConfig.cs)</code> takes the URL pattern <code class="prettyprint">{controller}/{action}/{id}</code></p>

<p>So for example,the generated route is:</p>

<p>http://localhost:1234/Movies/Edit/4</p>

<h3 id="html-displayfor">Html.DisplayFor</h3>

<h3 id="edit-view">Edit View</h3>

<h2 id="entity-framework">Entity Framework</h2>

<p>Why do we need Entity Framework?
You can use Entity Framework for code-first implementations. This allows you to define your models in code, and let Entity Framework generate the database for you.</p>

<h2 id="using-entity-framework">Using Entity Framework</h2>

<blockquote>
<p>The main class that coordinates Entity Framework functionality for a given data model is the database context class. You create this class by deriving from the <code class="prettyprint">System.Data.Entity.DbContext</code> class. In your code you specify which entities are included in the data model.</p>
</blockquote>

<h3 id="dbcontext"><code class="prettyprint">DbContext</code></h3>

<p>The <code class="prettyprint">DbContext</code> class you create will usually be quite simple.</p>
<pre class="highlight csharp tab-csharp"><code>    <span class="k">public</span> <span class="k">class</span> <span class="nc">ProjectContext</span> <span class="p">:</span> <span class="n">DbContext</span>
    <span class="p">{</span>

        <span class="k">public</span> <span class="nf">ProjectContext</span><span class="p">()</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="s">"ProjectContext"</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">DbSet</span><span class="p">&lt;</span><span class="n">Student</span><span class="p">&gt;</span> <span class="n">Students</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">DbSet</span><span class="p">&lt;</span><span class="n">Equipment</span><span class="p">&gt;</span> <span class="n">Equipments</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnModelCreating</span><span class="p">(</span><span class="n">DbModelBuilder</span> <span class="n">modelBuilder</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">modelBuilder</span><span class="p">.</span><span class="n">Conventions</span><span class="p">.</span><span class="n">Remove</span><span class="p">&lt;</span><span class="n">PluralizingTableNameConvention</span><span class="p">&gt;();</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>
<h3 id="dbcontext-methods">DbContext Methods</h3>

<h2 id="creating-the-schema">Creating the Schema</h2>

<p>If you look at the example application Microsoft use to demonstrate the features, you&rsquo;ll see that in the first excercise they create three entities:
- Student
- Course
- Enrollment</p>

<p>If you were creating your first application you might think you would just need two entities: <code class="prettyprint">Student</code> and <code class="prettyprint">Course</code>. Why do we need Enrollment? Why can&rsquo;t our Students have the course they are enrolled in as properties, and our Course have Students as properties? What does the <code class="prettyprint">Enrollment</code> entity bring to the table?</p>

<blockquote>
<p>The many-to-many relationship involves defining a third table (called a junction or join table), whose primary key is composed of the foreign keys from both related tables. </p>
</blockquote>

<p>Is this true for the Enrollment entity? No. It has it&rsquo;s own EnrollmentID key.</p>

<h3 id="connection-string">Connection String</h3>

<p>Enter this text in the <code class="prettyprint">Web.config</code> file in your project.</p>
<pre class="highlight html tab-html"><code><span class="nt">&lt;connectionStrings&gt;</span>
    <span class="nt">&lt;add</span> <span class="na">name=</span><span class="s">"[YOURMODELNAMEHERE]Context"</span>    
         <span class="na">connectionString=</span><span class="s">"Data Source=(LocalDB)\MSSQLLocalDB;
  AttachDbFilename=|DataDirectory|\[YOURDATABASENAMEHERE].mdf;
  Integrated Security=True"</span> 
         <span class="na">providerName=</span><span class="s">"System.Data.SqlClient"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/connectionStrings&gt;</span>
</code></pre>
<p>You don&rsquo;t actually have to have a connection string in the <code class="prettyprint">Web.config</code> file. If you don&rsquo;t supply a connection string, Entity Framework will use a default one based on your context class. However in that case the data won&rsquo;t save to a database.</p>

<h3 id="navigation-properties">Navigation Properties</h3>

<blockquote>
<p>Navigation properties provide a way to navigate an association between two entity types. Every object can have a navigation property for every relationship in which it participates. Navigation properties allow you to navigate and manage relationships in both directions, returning either a reference object (if the multiplicity is either one or zero-or-one) or a collection (if the multiplicity is many). You may also choose to have one-way navigation, in which case you define the navigation property on only one of the types that participates in the relationship and not on both.</p>
</blockquote>

<p>https://msdn.microsoft.com/en-us/library/jj713564(v=vs.113).aspx</p>
<pre class="highlight csharp tab-csharp"><code><span class="k">public</span> <span class="k">virtual</span> <span class="n">OfficeAssignment</span> <span class="n">OfficeAssignment</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</code></pre>
<p>If a navigation property can hold multiple entities, its type must implement the ICollection<T> Interface.</p>
<pre class="highlight csharp tab-csharp"><code><span class="k">public</span> <span class="k">virtual</span> <span class="n">ICollection</span><span class="p">&lt;</span><span class="n">Equipment</span><span class="p">&gt;</span> <span class="n">Equipment</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>  
</code></pre>
<p>The <code class="prettyprint">Equipment</code> property is a navigation property. Navigation properties hold other entities that are related to this entity. In this case, the <code class="prettyprint">Equipment</code> property of a <code class="prettyprint">Student</code> entity will hold all of the <code class="prettyprint">Equipment</code> entities that are related to that Student entity. In other words, if a given <code class="prettyprint">Student</code> row in the database has two related <code class="prettyprint">Equipment</code> rows (rows that contain that student&rsquo;s primary key value in their StudentID foreign key column), that <code class="prettyprint">Student</code> entity&rsquo;s <code class="prettyprint">Equipment</code> navigation property will contain those two <code class="prettyprint">Equipment</code> entities.</p>

<p>Navigation properties are typically defined as virtual so that they can take advantage of an Entity Framework feature called lazy loading.</p>

<h2 id="code-first">Code First</h2>

<p>Entity Framework allows you to develop a data model with a Code First approach.</p>

<p>Code First Migrations allow you to update your data model and update the database schema without having to drop and re-create the database.</p>

<p>This means that you can define your models and Entity Framework will create the database for you.</p>

<h2 id="the-connection-string">The Connection String</h2>

<p>A connection string provides the information that a provider needs to communicate with a particular database. The Connection String includes parameters such as the name of the driver, Server name and Database name , as well as security information such as user name and password.</p>

<p>First of all, you need to add a connection string to your <code class="prettyprint">Web.config</code> file. Enter this text in the Web.config file in your project.</p>
<pre class="highlight html tab-html"><code><span class="nt">&lt;connectionStrings&gt;</span>
    <span class="nt">&lt;add</span> <span class="na">name=</span><span class="s">"[YOURMODELNAMEHERE]Context"</span>    
         <span class="na">connectionString=</span><span class="s">"Data Source=(LocalDB)\MSSQLLocalDB;
  AttachDbFilename=|DataDirectory|\[YOURDATABASENAMEHERE].mdf;
  Integrated Security=True"</span> 
         <span class="na">providerName=</span><span class="s">"System.Data.SqlClient"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/connectionStrings&gt;</span>
</code></pre>
<p>Note that In Visual Studio 2012 the data source is <code class="prettyprint">(LocalDB)\v11.0</code>. For Visual Studio 2015 and Visual Studio 2017 it is <code class="prettyprint">(LocalDB)\MSSQLLocalDB</code>.
LocalDB is a lightweight version of the SQL Server Express Database Engine that is targeted for program development. LocalDB starts on demand and runs in user mode, so there is no complex configuration. </p>

<p>You don&rsquo;t actually have to have a connection string in the Web.config file. If you don&rsquo;t supply a connection string, Entity Framework will use a default one based on your context class. However in that case the data won&rsquo;t save to a database.</p>

<h3 id="deploying-to-azure">Deploying to Azure</h3>

<p>New connection strings are generated when you deploy to Azure.</p>
<pre class="highlight html tab-html"><code><span class="nt">&lt;connectionStrings&gt;</span>
    <span class="nt">&lt;add</span> <span class="na">name=</span><span class="s">"ProjectContext"</span>
         <span class="na">connectionString=</span><span class="s">"$(ReplacableToken_ProjectContext-Web.config Connection String_0)"</span>        <span class="na">providerName=</span><span class="s">"System.Data.SqlClient"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;add</span> <span class="na">name=</span><span class="s">"ProjectContext_DatabasePublish"</span> <span class="na">connectionString=</span><span class="s">"$(ReplacableToken_ProjectContext_DatabasePublish-Web.config Connection String_0)"</span> <span class="na">providerName=</span><span class="s">"System.Data.SqlClient"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/connectionStrings&gt;</span>
</code></pre>
<p>You can find them in <code class="prettyprint">[ProjectName]\obj\Release\Package\PackageTmp\Web.config</code>.</p>

<h2 id="setting-the-seed-method-to-update-from-a-csv-file">Setting the Seed method to update from a csv file.</h2>

<p>Rather than painstakingly typing values into the Seed method, you can set it to import from a CSV file.
<a href="https://www.davepaquette.com/archive/2014/03/18/seeding-entity-framework-database-from-csv.aspx">There are great instructions on how to do this here.</a>
One mistake I made at first was that I referenced the wrong assembly. Stack Overflow recommended &ldquo;to make sure you&rsquo;re in the right assembly and with right name: dump and evaluate all the resources available in your target assembly.&rdquo; Which I did:</p>
<pre class="highlight csharp tab-csharp"><code><span class="kt">string</span><span class="p">[]</span> <span class="n">names</span> <span class="p">=</span> <span class="n">assembly</span><span class="p">.</span><span class="nf">GetManifestResourceNames</span><span class="p">();</span>
<span class="kt">string</span> <span class="n">fullString</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span>
<span class="n">names</span><span class="p">.</span><span class="nf">ToList</span><span class="p">().</span><span class="nf">ForEach</span><span class="p">(</span><span class="n">i</span> <span class="p">=&gt;</span> <span class="n">fullString</span> <span class="p">+=</span> <span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="nf">ToString</span><span class="p">())</span> <span class="p">+</span> <span class="sc">'\n'</span><span class="p">);</span>
</code></pre>
<h3 id="debugging-the-update-database-command">Debugging the Update-Database command</h3>

<p>Running the Update-Database command meant that debugging statments like <code class="prettyprint">Debug.WriteLine()</code> didn&rsquo;t work. Instead I threw an error:</p>
<pre class="highlight csharp tab-csharp"><code><span class="k">throw</span> <span class="k">new</span> <span class="nf">Exception</span><span class="p">(</span><span class="n">fullString</span><span class="p">);</span>
</code></pre>
<p>Then I could see I couldn&rsquo;t access the resource since:
1. It was saved in the wrong namespace.
2. It&rsquo;s build action was set to <code class="prettyprint">Resource</code> instead of <code class="prettyprint">Embedded Resource</code>.</p>

<p>After I fixed these mistakes I could easily Seed from a CSV.</p>

<h2 id="migrations">Migrations</h2>

<p>First of all, you don&rsquo;t <em>have</em> to use Migrations. However, if you don&rsquo;t, all database content will be lost when you update your models.</p>

<p><a href="https://stackoverflow.com/questions/40606167/error-when-update-database-using-code-first-there-is-already-an-object-named">Great introduction to Code First Migrations</a></p>

<h3 id="nuget-commands">NuGet Commands</h3>

<p>There are three main NuGet commands used in migrations.
- <code class="prettyprint">Enable-Migrations</code> - Used initially to install migration modules
- <code class="prettyprint">Add-Migration MyNewMigration</code> - Used to add a migration
- <code class="prettyprint">Update-Database</code></p>

<p>Migrations are code files. Every time you run <code class="prettyprint">Add-Migration</code> a code file is generated/updated, usually in a folder called <code class="prettyprint">Migrations</code> inside your project. The name of a migration file is composed with a timestamp of its generation concatenated with the name used when running <code class="prettyprint">Add-Migration</code>. For example
<code class="prettyprint">bash
Add-Migration Initial
</code>
generates
<code class="prettyprint">bash
201710021217244_Initial.cs
</code></p>

<p>You can check the contents of those files and see the effects of running <code class="prettyprint">Add-Migration</code>. You can also modify them once generated, and add your own code. From my experience it is often necessary to do this.</p>

<h3 id="up-and-down-methods">Up and Down Methods</h3>

<p>Every single migration has a method <code class="prettyprint">Up</code> and a method <code class="prettyprint">Down</code>. </p>

<p>The <code class="prettyprint">Up</code> method updates the database. The <code class="prettyprint">Down</code> method reverts them.</p>

<p>Methods:
- <code class="prettyprint">CreateTable</code>
- <code class="prettyprint">CreateIndex</code>
- <code class="prettyprint">AlterColumn</code>
- <code class="prettyprint">AddForeignKey</code>
- <code class="prettyprint">DropTable</code>
- <code class="prettyprint">DropIndex</code>
- <code class="prettyprint">DropForeignKey</code></p>

<h3 id="migration-history">Migration History</h3>

<p>Migrations are intended to be incremental. You start with an <code class="prettyprint">Initial</code> migration, and every time you change your model code you generate a new migration file. The database contains a table named <code class="prettyprint">__MigrationsHistory</code> that keeps trace of which migrations have been run in your database.</p>

<p>When you run <code class="prettyprint">Update-Database</code> there are always two implicit parameters: <code class="prettyprint">SourceMigration</code> and <code class="prettyprint">TargetMigration</code>. EF incrementally applies the <code class="prettyprint">Up</code> methods of all the migrations between <code class="prettyprint">SourceMigration</code> and <code class="prettyprint">TargetMigration</code> (or the <code class="prettyprint">Down</code> methods if you are downgrading your database). </p>

<p>The default scenario when you don&rsquo;t specify the <code class="prettyprint">SourceMigration</code> and <code class="prettyprint">TargetMigration</code> parameters is that <code class="prettyprint">SourceMigration</code> is the last migration applied to the database and <code class="prettyprint">TargetMigration</code> is the last of the pending ones. EF determines those parameters by querying the <code class="prettyprint">__MigrationsHistory</code> table of the default database of your project, so if that database is not in a consistent state, your migrations can be generated incorrectly.</p>

<h2 id="the-easiest-way-to-fix-a-problem">The Easiest Way to fix a problem</h2>

<p>Error: <code class="prettyprint">There is already an object named &#39;ModelName&#39; in the database.</code></p>

<ol>
<li>Delete the <code class="prettyprint">Migrations</code> folder in your solution.</li>
<li>Delete the tables in the database.</li>
<li>Delete the <code class="prettyprint">_MigrationHistory</code> table in the database.</li>
<li>Close the database connection.</li>
<li>In the NuGet console, run <code class="prettyprint">Enable-Migrations</code>.</li>
<li>Run <code class="prettyprint">Add-Migration Initial</code>.</li>
<li>Run <code class="prettyprint">Update-Database</code>.</li>
</ol>

<p>Error: <code class="prettyprint">Sequence contains more than one element.</code></p>

<h3 id="when-things-go-wrong">When Things Go Wrong</h3>

<p>Entity Framework is not perfect.</p>

<blockquote>
<p>Essentially the ORM can handle about 80-90% of the mapping problems, but that last chunk always needs careful work by somebody who really understands how a relational database works.</p>

<p>Mapping to a relational database involves lots of repetitive, boiler-plate code. A framework that allows me to avoid 80% of that is worthwhile even if it is only 80%. The problem is in me for pretending it&rsquo;s 100% when it isn&rsquo;t.</p>
</blockquote>

<p>You can&rsquo;t just run <code class="prettyprint">Add-Migration MyNewMigration</code> and assume everything will work out fine. You need to check to make sure that the generated code works correctly.</p>

<h2 id="asp-net-views">ASP.NET Views</h2>

<h2 id="using-code">Using Code</h2>

<blockquote>
<p>The key transition character in Razor is the “at” sign (@). This single character is used to transition from markup to code.</p>
</blockquote>

<p>The @ transition symbol effectively works as a <code class="prettyprint">console.log</code> or <code class="prettyprint">println()</code> mechanism.</p>

<p>Code that is encased in curly brackets will be executed. Code that&rsquo;s simply preceded by <code class="prettyprint">@</code> will be outputted.</p>
<pre class="highlight csharp tab-csharp"><code><span class="err">@</span><span class="p">{</span><span class="kt">var</span> <span class="n">test</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span> <span class="p">}</span>
<span class="err">@</span><span class="p">{</span><span class="n">test</span> <span class="p">=</span> <span class="n">test</span> <span class="p">-</span><span class="m">1</span><span class="p">;}</span>
<span class="n">@test</span> <span class="c1">// 9</span>
</code></pre>
<blockquote>
<p>By including a <code class="prettyprint">@model</code> statement at the top of the view template file, you can specify the type of object that the view expects.</p>
</blockquote>

<p><code class="prettyprint">@model IEnumerable&lt;Your.Model.Namespace&gt;</code></p>

<blockquote>
<p>This @model directive allows you to access the list of movies that the controller passed to the view</p>
</blockquote>

<h3 id="layout">Layout</h3>

<p>By convention, the default layout for an ASP.NET app is named <code class="prettyprint">_Layout.cshtml</code>.</p>

<p>The default layout is defined in <code class="prettyprint">_ViewStart.cshtml</code> file in <code class="prettyprint">Views</code>.</p>

<h2 id="html-helper-methods">HTML Helper Methods</h2>

<p>The <code class="prettyprint">Html</code> object is a helper that&rsquo;s exposed using a property on the <code class="prettyprint">System.Web.Mvc.WebViewPage base</code> class. </p>

<h3 id="html-beginform"><code class="prettyprint">Html.BeginForm</code></h3>

<p>if you leave it empty it will look for a post action with the same name that on the page you are now</p>

<ul>
<li>Html.DisplayNameFor</li>
<li>Html.DisplayFor</li>
<li>Html.ValidationSummary</li>
<li>Html.EditorFor</li>
<li>Html.LabelFor</li>
<li>Html.DropDownList</li>
</ul>

<h3 id="html-actionlink"><code class="prettyprint">Html.ActionLink</code></h3>

<p>The <code class="prettyprint">ActionLink</code> method of the helper makes it easy to dynamically generate HTML hyperlinks that link to action methods on controllers. </p>
<pre class="highlight csharp tab-csharp"><code><span class="n">@Html</span><span class="p">.</span><span class="nf">ActionLink</span><span class="p">(</span><span class="s">"Edit"</span><span class="p">,</span> <span class="s">"Edit"</span><span class="p">,</span> <span class="k">new</span> <span class="p">{</span> <span class="n">id</span><span class="p">=</span><span class="n">item</span><span class="p">.</span><span class="n">ID</span> <span class="p">})</span> 
</code></pre>
<p>arguments
- string linkText
- string actionName (this is the method name unless otherwise specified)
- string controllerName OR object routeValues</p>

<h3 id="html-displayfor">Html.DisplayFor</h3>

  </div>
  <div class="dark-box">
  </div>
</div>
  </body>
</html>
